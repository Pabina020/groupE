<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Edit Property - RentUp</title>

  <link rel="stylesheet" type="text/css" href="css/vendor.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="js/modernizr.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <style>
    .property-card {
      transition: transform 0.3s ease;
    }
    .property-card:hover {
      transform: translateY(-5px);
    }
    .property-img {
      height: 200px;
      object-fit: cover;
      border-radius: 8px 8px 0 0;
    }
    .search-box {
      max-width: 500px;
    }
  </style>
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example2" tabindex="0">
<!-- Centered Toast for Add Property Access -->
<div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 1060">
  <div id="loginToast" class="toast align-items-center text-white bg-danger border-0 shadow-lg" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body" id="loginToastBody">Please log in as a landlord to add a property.</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>
  <!-- nav bar start -->
  <header class="site-header fixed-top ">
    <nav class="navbar navbar-expand-lg py-3">
      <div class="container d-flex justify-content-between align-items-center">
        <!-- Logo -->
        <a class="navbar-brand" href="./index.html"><img src="images/logo.png" alt="image"></a>
  
        <!-- Nav items -->
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasNavbar2" aria-controls="offcanvasNavbar2" aria-label="Toggle navigation"><ion-icon
          name="menu-outline" style="font-size: 30px;"></ion-icon></button>
  
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar2"
        aria-labelledby="offcanvasNavbar2Label">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasNavbar2Label">Menu</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-center rounded-pill bg-white align-items-center mx-lg-5 px-lg-5">
            <li class="nav-item">
            <a class="nav-link me-md-4" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-md-4" href="index.html#apartment">Apartments</a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-md-4" href="index.html#residence">Properties</a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-md-4" href="HelpCenter/project/helpcenter.html">Help center</a>
          </li>
          <li class="nav-item">
            <a class="nav-link me-md-4" href="index.html#contact-us">Contact Us</a>
          </li>
          <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
              <span class="link-text">Pages</span>
            </a>
            
            <ul class="dropdown-menu dropdown-menu-light">
                  <li><a href="about.html" class="dropdown-item">About </a>
                  </li>
                  <li><a href="properties.html" class="dropdown-item">Properties </a></li>
                  <li><a href="contact.html" class="dropdown-item">Contact </a></li>
                  <li><a href="reviews.html" class="dropdown-item">Review </a></li>
                  <li><a href="agents.html" class="dropdown-item">Agents </a>
                  </li>
                  <li><a href="faqs.html" class="dropdown-item">FAQs </a>
                  </li>
                  <li><a href="bug-report/index.html" class="dropdown-item">Report Bug </a>
                  </li>
                </ul>
          </li></ul>
      
       <div class="d-flex align-items-center gap-3 mt-3 mt-lg-0">

              <!-- Add Property Button -->
              <a href="#" id="addPropertyBtn" class="btn btn-success btn-sm rounded-pill px-3">Add Property +</a>

              <!-- User Profile Section -->
              <div class="d-flex align-items-center gap-2">
                <img src="images/user-avatar.png" alt="User Avatar" class="rounded-circle"
                  style="width: 40px; height: 40px;">
                <span class="fw-semibold text-dark"><span id="username">User</span></span>
                <a href="#" id="logoutBtn" class="btn btn-danger btn-sm rounded-pill">Logout</a>
              </div>

            </div>
      </div>
    </nav>
  </header>

  <!-- Billboard -->
  <section id="page-billboard" style="background-image: url(images/pattern.png);">
    <div class="container py-5">
      <div class="page-billboard-container">
        <h1 class="text-capitalize lh-1 mb-3">Edit Property</h1>
        <span class="item"><a href="index.html" class="text-primary">Home</a></span> &nbsp; / &nbsp; 
        <span class="item"><a href="landlord.html" class="text-primary">Landlord</a></span> &nbsp; / &nbsp; 
        <span class="item">Edit Property</span>
      </div>
    </div>
  </section>

  <!-- Property List Section -->
  <section class="container py-5 mb-5">
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="input-group search-box">
          <input type="text" id="searchInput" class="form-control" placeholder="Search properties...">
          <button class="btn btn-primary" type="button" onclick="filterProperties()">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </div>
      <div class="col-md-6">
        <select id="typeFilter" class="form-select">
          <option value="">All Types</option>
          <option value="Sale">For Sale</option>
          <option value="Rent">For Rent</option>
        </select>
      </div>
    </div>

    <div class="row" id="propertyList">
      <!-- Properties will be loaded here -->
      <div class="col-12 text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer Start -->
  <section id="footer">
    <div class="container footer-container py-5">
      <footer class="row row-cols-1 row-cols-sm-2 row-cols-md-5">
  
        <!-- Logo & Description -->
        <div class="col-md-4 mb-4">
          <h3><img src="images/logo-footer.png" alt="RentHub Logo" class="mb-3"></h3>
          <p>Neque, vestibulum sed varius magna et at. Eu, adipiscing morbi augue.</p>
          <div class="mt-3">
            <i class="bi bi-facebook pe-3"></i>
            <i class="bi bi-instagram pe-3"></i>
            <i class="bi bi-twitter pe-3"></i>
            <i class="bi bi-youtube pe-3"></i>
          </div>
        </div>
  
        <!-- Project Links -->
        <div class="col-md-2 mb-4">
          <h5>Project</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Houses</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Rooms</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Flats</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Appartments</a></li>
          </ul>
        </div>
  
        <!-- Company Links -->
        <div class="col-md-2 mb-4">
          <h5>Company</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">How we work?</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Capital</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Security</a></li>
          </ul>
        </div>
  
        <!-- Movement Links -->
        <div class="col-md-2 mb-4">
          <h5>Movement</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Movement</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Support us</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Pricing</a></li>
          </ul>
        </div>
  
        <!-- Help Links -->
        <div class="col-md-2 mb-4">
          <h5>Help</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Privacy</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Condition</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Blog</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">FAQs</a></li>
          </ul>
        </div>
  
      </footer>
    </div>

  <script src="js/jquery-1.11.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      fetchProperties();
    });

    function fetchProperties() {
      fetch('get_properties.php')
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            showError(data.error);
            return;
          }
          displayProperties(data);
        })
        .catch(error => console.error('Error:', error));
    }

    function displayProperties(properties) {
      const propertyList = document.getElementById('propertyList');
      propertyList.innerHTML = '';

      if (properties.length === 0) {
        propertyList.innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="alert alert-info">
              No properties found. <a href="property-upload-delete.html#upload" class="alert-link">Upload a property</a> to get started.
            </div>
          </div>
        `;
        return;
      }

      properties.forEach(property => {
        const propertyCard = document.createElement('div');
        propertyCard.className = 'col-md-6 col-lg-4 mb-4';
        
        propertyCard.innerHTML = `
          <div class="card h-100 shadow-sm property-card">
            <img src="${property.main_image}" class="card-img-top property-img" alt="${property.name}">
            <div class="card-body">
              <h5 class="card-title">${property.name}</h5>
              <p class="text-muted mb-2"><i class="bi bi-geo-alt"></i> ${property.location}</p>
              <div class="d-flex justify-content-between mb-2">
                <span><i class="bi bi-house-door"></i> ${property.bedrooms} Beds</span>
                <span><i class="bi bi-droplet"></i> ${property.bathrooms} Baths</span>
                <span><i class="bi bi-arrows-angle-expand"></i> ${property.sqft} sqft</span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-bold text-primary">$${property.price}</span>
                <span class="badge ${property.type === 'Sale' ? 'bg-success' : 'bg-info'}">${property.type}</span>
              </div>
            </div>
            <div class="card-footer bg-transparent">
              <a href="property_editor.html?id=${property.property_id}" class="btn btn-warning w-100 rounded-pill">
                <i class="bi bi-pencil-square"></i> Edit Property
              </a>
            </div>
          </div>
        `;
        
        propertyList.appendChild(propertyCard);
      });
    }

    function filterProperties() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const typeFilter = document.getElementById('typeFilter').value;
      
      fetch('get_properties.php')
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            console.error(data.error);
            return;
          }
          
          let filtered = data.filter(property => {
            const matchesSearch = property.name.toLowerCase().includes(searchTerm) || 
                                 property.location.toLowerCase().includes(searchTerm) ||
                                 property.description.toLowerCase().includes(searchTerm);
            const matchesType = typeFilter === '' || property.type === typeFilter;
            return matchesSearch && matchesType;
          });
          
          displayProperties(filtered);
        })
        .catch(error => console.error('Error:', error));
    }

    function showError(message) {
      const propertyList = document.getElementById('propertyList');
      propertyList.innerHTML = `
        <div class="col-12">
          <div class="alert alert-danger">${message}</div>
        </div>
      `;
    }
  </script>
<!-- Centered Toast Container -->
<div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 1055">
  <div id="logoutToast" class="toast align-items-center text-white bg-success border-0 shadow-lg" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body" id="logoutToastBody">Logging out...</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>
</body>

</html>