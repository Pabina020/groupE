<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Landlord Dashboard - RentUp</title>

  <link rel="stylesheet" type="text/css" href="css/vendor.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="js/modernizr.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <style>
/* Notification bell button */
#notificationBtn {
  background-color: #4b5563; /* Tailwind slate-600 */
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 25px;
  position: relative;
  transition: background-color 0.3s ease;
}

#notificationBtn:hover {
  background-color: #374151; /* Slightly darker on hover */
}

/* Notification badge */
#notifCount {
  font-size: 0.75rem;
  padding: 2px 8px;
  background-color: #dc3545; /* Bootstrap danger red */
  color: white;
  border-radius: 50%;
  position: absolute;
  display: none;
}

#notificationDropdown {
  max-height: 400px;
  opacity: 1;
  overflow-y: auto;
  background-color: #fff;
  min-width: 300px;
  max-width: 400px; /* increase max width */
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  padding: 0;
  position: absolute;
  right: 0;
  top: 40px;
  z-index: 999;
  transition: all 0.4s ease;
}

#notificationDropdown li {
  padding: 12px 16px;
  border-bottom: 1px solid #eee;
  font-size: 0.9rem;
  color: #333;
  background-color: #fff;
  transition: background-color 0.2s;
  white-space: normal;         /* allow wrapping */
  word-break: break-word;      /* break long strings */
  line-height: 1.5;
}

/* Show dropdown */
#notificationDropdown.show {
  max-height: 400px;
  opacity: 1;
}


#notificationDropdown li:hover {
  background-color: #f8f9fa;
}

#notificationDropdown li:last-child {
  border-bottom: none;
}

#notificationDropdown small {
  display: block;
  color: #888;
  margin-top: 4px;
  font-size: 0.8rem;
}

  </style>
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example2" tabindex="0">
  <!-- Centered Toast for Add Property Access -->
  <div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 1060">
    <div id="loginToast" class="toast align-items-center text-white bg-danger border-0 shadow-lg" role="alert"
      aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="loginToastBody">Please log in as a landlord to add a property.</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>
  </div>
  <!-- nav bar start -->
  <header class="site-header fixed-top ">
    <nav class="navbar navbar-expand-lg py-3">
      <div class="container d-flex justify-content-between align-items-center">
        <!-- Logo -->
        <a class="navbar-brand" href="./index.html"><img src="images/logo.png" alt="image"></a>


        <!-- Nav items -->
        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar2"
          aria-controls="offcanvasNavbar2" aria-label="Toggle navigation"><ion-icon name="menu-outline"
            style="font-size: 30px;"></ion-icon></button>

        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar2"
          aria-labelledby="offcanvasNavbar2Label">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasNavbar2Label">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-center rounded-pill bg-white align-items-center mx-lg-5 px-lg-5">
              <li class="nav-item">
                <a class="nav-link me-md-4" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link me-md-4" href="index.html#apartment">Apartments</a>
              </li>
              <li class="nav-item">
                <a class="nav-link me-md-4" href="index.html#residence">Properties</a>
              </li>
              <li class="nav-item">
                <a class="nav-link me-md-4" href="HelpCenter/project/helpcenter.html">Help center</a>
              </li>
              <li class="nav-item">
                <a class="nav-link me-md-4" href="index.html#contact-us">Contact Us</a>
              </li>
              <li class="nav-item dropdown ">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button"
                  aria-expanded="false">
                  <span class="link-text">Pages</span>
                </a>

                <ul class="dropdown-menu dropdown-menu-light">
                  <li><a href="about.html" class="dropdown-item">About </a>
                  </li>
                  <li><a href="properties.html" class="dropdown-item">Properties </a></li>
                  <li><a href="contact.html" class="dropdown-item">Contact </a></li>
                  <li><a href="reviews.html" class="dropdown-item">Review </a></li>
                  <li><a href="agents.html" class="dropdown-item">Agents </a>
                  </li>
                  <li><a href="faqs.html" class="dropdown-item">FAQs </a>
                  </li>
                  <li><a href="bug-report/index.html" class="dropdown-item">Report Bug </a>
                  </li>
                </ul>
              </li>
            </ul>




            <div class="d-flex align-items-center gap-3 mt-3 mt-lg-0">

              <!-- Add Property Button -->
              <a href="#" id="addPropertyBtn" class="btn btn-success btn-sm rounded-pill px-3">Add Property +</a>

              <!-- Notification Button -->
              <div class="dropdown">
                <button class="btn btn-outline-secondary position-relative rounded-pill dropdown-toggle" type="button"
                  data-bs-toggle="dropdown" id="notificationBtn">
                  <i class="bi bi-bell"></i>
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    id="notifCount" style="display:none;">
                    0
                  </span>
                </button>
                <ul class="dropdown-menu" id="notificationDropdown">
                  <li>Loading...</li>
                </ul>
              </div>
              <!-- User Profile Section -->
              <div class="d-flex align-items-center gap-2">
                <img src="images/user-avatar.png" alt="User Avatar" class="rounded-circle"
                  style="width: 40px; height: 40px;">
                <span class="fw-semibold text-dark"><span id="username">User</span></span>


                <a href="#" id="logoutBtn" class="btn btn-danger btn-sm rounded-pill">Logout</a>
              </div>

            </div>

          </div>
    </nav>
  </header>

  <!-- Billboard -->
  <section id="page-billboard" style="background-image: url(images/pattern.png);">
    <div class="container py-5">
      <div class="page-billboard-container">
        <h1 class="text-capitalize lh-1 mb-3">Landlord Dashboard</h1>
        <span class="item"><a href="index.html" class="text-primary">Home</a></span> &nbsp; / &nbsp; <span
          class="item">Landlord</span>
      </div>
    </div>
  </section>

  <!-- Landlord Actions -->
  <section class="container py-5 mb-5">
    <div class="row justify-content-center gap-4">
      <div class="col-md-5">
        <div class="card h-100 shadow rounded-4 text-center p-4">
          <h4 class="fw-semibold mb-3">Upload Property</h4>
          <p class="text-muted">Add a new property listing to the RentUp platform.</p>
          <a href="property-upload-delete.html#upload" class="btn btn-primary rounded-pill px-4">Go to Upload</a>
        </div>
      </div>
      <div class="col-md-5">
        <div class="card h-100 shadow rounded-4 text-center p-4">
          <h4 class="fw-semibold mb-3">Delete Property</h4>
          <p class="text-muted">Remove your existing listing by property ID.</p>
          <a href="property-upload-delete.html#delete" class="btn btn-outline-danger rounded-pill px-4">Go to Delete</a>
        </div>
      </div>
      <div class="col-md-5">
        <div class="card h-100 shadow rounded-4 text-center p-4">
          <h4 class="fw-semibold mb-3">Edit Property</h4>
          <p class="text-muted">Modify your existing property listings.</p>
          <a href="edit_property.html" class="btn btn-outline-danger rounded-pill px-4">Go to Edit</a>
        </div>
      </div>
  </section>

  <!-- Footer Start -->
  <section id="footer">
    <div class="container footer-container py-5">
      <footer class="row row-cols-1 row-cols-sm-2 row-cols-md-5">

        <!-- Logo & Description -->
        <div class="col-md-4 mb-4">
          <h3><img src="images/logo-footer.png" alt="RentHub Logo" class="mb-3"></h3>
          <p>Neque, vestibulum sed varius magna et at. Eu, adipiscing morbi augue.</p>
          <div class="mt-3">
            <i class="bi bi-facebook pe-3"></i>
            <i class="bi bi-instagram pe-3"></i>
            <i class="bi bi-twitter pe-3"></i>
            <i class="bi bi-youtube pe-3"></i>
          </div>
        </div>

        <!-- Project Links -->
        <div class="col-md-2 mb-4">
          <h5>Project</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Houses</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Rooms</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Flats</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Appartments</a></li>
          </ul>
        </div>

        <!-- Company Links -->
        <div class="col-md-2 mb-4">
          <h5>Company</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">How we work?</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Capital</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Security</a></li>
          </ul>
        </div>

        <!-- Movement Links -->
        <div class="col-md-2 mb-4">
          <h5>Movement</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Movement</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Support us</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Pricing</a></li>
          </ul>
        </div>

        <!-- Help Links -->
        <div class="col-md-2 mb-4">
          <h5>Help</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2"><a href="#" class="footer-link">Privacy</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Condition</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">Blog</a></li>
            <li class="nav-item mb-2"><a href="#" class="footer-link">FAQs</a></li>
          </ul>
        </div>

      </footer>
    </div>



    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script src="LogSign/project/script.js"></script>
    <script>
function fetchNotifications() {
  fetch('get-notifications.php')
    .then(response => response.json())
    .then(data => {
      const notifCount = document.getElementById('notifCount');
      const notifDropdown = document.getElementById('notificationDropdown');

      if (data.length > 0) {
        notifCount.textContent = data.length;
        notifCount.style.display = 'inline-block';

        notifDropdown.innerHTML = '';
        data.forEach(n => {
          notifDropdown.innerHTML += `
            <li class="dropdown-item">${n.message}<br>
              <small class="text-muted">${new Date(n.created_at).toLocaleString()}</small>
            </li>`;
        });

        notifDropdown.classList.add('show');
      } else {
        notifCount.style.display = 'none';
        notifDropdown.innerHTML = '<li class="dropdown-item">No new notifications</li>';
        notifDropdown.classList.remove('show');
      }
    })
    .catch(err => {
      console.error('Error fetching notifications:', err);
    });
}

      // Logout button functionality
      setInterval(fetchNotifications, 10000); // Poll every 10 seconds
      window.onload = fetchNotifications;

      // Poll every 10 seconds
      setInterval(fetchNotifications, 10000);
      window.onload = fetchNotifications;
    </script>

    <!-- Centered Toast Container -->
    <div class="position-fixed top-50 start-50 translate-middle p-3" style="z-index: 1055">
      <div id="logoutToast" class="toast align-items-center text-white bg-success border-0 shadow-lg" role="alert"
        aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body" id="logoutToastBody">Logging out...</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
            aria-label="Close"></button>
        </div>
      </div>
    </div>
</body>


</html>